<!-- layout/layout.html -->
<header class="header">
  <div class="header-container">
    <!-- Mobile Menu Toggle -->
    <button class="menu-toggle" (click)="toggleMenu()" aria-label="Toggle menu">
      <svg
        width="24"
        height="24"
        viewBox="0 0 24 24"
        fill="none"
        xmlns="http://www.w3.org/2000/svg"
      >
        <path d="M3 18H21V16H3V18ZM3 13H21V11H3V13ZM3 6V8H21V6H3Z" fill="currentColor" />
      </svg>
    </button>

    <!-- Logo/Brand Section -->
    <div class="brand-section">
      <a routerLink="/home" class="brand-link">
        <div class="logo-container">
          <div class="logo-icon">
            <svg
              width="32"
              height="32"
              viewBox="0 0 32 32"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
            >
              <path
                d="M16 2L4 8V24L16 30L28 24V8L16 2ZM16 4.472L25.764 9.236L16 14L6.236 9.236L16 4.472ZM6 10.764L16 16L26 10.764V22.236L16 28L6 22.236V10.764Z"
                fill="currentColor"
              />
              <path d="M12 18H20V20H12V18Z" fill="currentColor" />
              <path d="M12 22H20V24H12V22Z" fill="currentColor" />
            </svg>
          </div>
          <h1 class="brand-title">Prand<span class="highlight">.</span>Fashion</h1>
        </div>
      </a>
    </div>

    <!-- Navigation Section -->
    <nav class="navigation" [class.active]="isMenuOpen">
      <ul class="nav-list">
        <li class="nav-item">
          <a
            routerLink="/home"
            routerLinkActive="active"
            class="nav-link"
            (click)="isMenuOpen = false"
          >
            <svg
              width="18"
              height="18"
              viewBox="0 0 24 24"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
              class="nav-icon"
            >
              <path d="M10 20V14H14V20H19V12H22L12 3L2 12H5V20H10Z" fill="currentColor" />
            </svg>
            <span>Home</span>
          </a>
        </li>
        <li class="nav-item">
          <a
            routerLink="/products"
            routerLinkActive="active"
            class="nav-link"
            (click)="isMenuOpen = false"
          >
            <svg
              width="18"
              height="18"
              viewBox="0 0 24 24"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
              class="nav-icon"
            >
              <path
                d="M20 6H16V4C16 2.9 15.1 2 14 2H10C8.9 2 8 2.9 8 4V6H4C2.9 6 2 6.9 2 8V20C2 21.1 2.9 22 4 22H20C21.1 22 22 21.1 22 20V8C22 6.9 21.1 6 20 6ZM10 4H14V6H10V4ZM20 20H4V8H20V20Z"
                fill="currentColor"
              />
            </svg>
            <span>Shop</span>
          </a>
        </li>
        <li class="nav-item">
          <a
            routerLink="/about"
            routerLinkActive="active"
            class="nav-link"
            (click)="isMenuOpen = false"
          >
            <svg
              width="18"
              height="18"
              viewBox="0 0 24 24"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
              class="nav-icon"
            >
              <path
                d="M16 11C17.66 11 18.99 9.66 18.99 8C18.99 6.34 17.66 5 16 5C14.34 5 13 6.34 13 8C13 9.66 14.34 11 16 11ZM8 11C9.66 11 10.99 9.66 10.99 8C10.99 6.34 9.66 5 8 5C6.34 5 5 6.34 5 8C5 9.66 6.34 11 8 11ZM8 13C5.67 13 1 14.17 1 16.5V19H15V16.5C15 14.17 10.33 13 8 13ZM16 13C15.71 13 15.38 13.02 15.03 13.05C16.19 13.89 17 15.02 17 16.5V19H23V16.5C23 14.17 18.33 13 16 13Z"
                fill="currentColor"
              />
            </svg>
            <span>About</span>
          </a>
        </li>
        @if(name != '' && userRole === 'admin') {
        <li class="nav-item">
          <a
            routerLink="/dashboard/home"
            routerLinkActive="active"
            class="nav-link dashboard-link"
            (click)="isMenuOpen = false"
          >
            <svg
              width="18"
              height="18"
              viewBox="0 0 24 24"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
              class="nav-icon"
            >
              <path
                d="M3 13H11V3H3V13ZM3 21H11V15H3V21ZM13 21H21V11H13V21ZM13 3V9H21V3H13Z"
                fill="currentColor"
              />
            </svg>
            <span>Dashboard</span>
          </a>
        </li>
        }
      </ul>
    </nav>

    <!-- Action Section -->
    <div class="action-section">
      <!-- Search Icon -->
      <button class="action-btn search-btn" (click)="toggleSearch()" title="Search">
        <svg
          width="20"
          height="20"
          viewBox="0 0 24 24"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
        >
          <path
            d="M21 21L16.514 16.506L21 21ZM19 10.5C19 15.194 15.194 19 10.5 19C5.806 19 2 15.194 2 10.5C2 5.806 5.806 2 10.5 2C15.194 2 19 5.806 19 10.5Z"
            stroke="currentColor"
            stroke-width="2"
            stroke-linecap="round"
            stroke-linejoin="round"
          />
        </svg>
      </button>

      <!-- في layout.html، عدل هذا الجزء -->
      <!-- Cart Icon -->
      <a routerLink="/cart" class="action-btn cart-btn" title="Shopping Cart">
        <svg
          width="20"
          height="20"
          viewBox="0 0 24 24"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
        >
          <path
            d="M3 3H5L5.4 5M7 13H17L21 5H5.4M7 13L5.4 5M7 13L4.7 15.3C4.2 15.8 4.6 17 5.4 17H17M17 17C16.4 17 16 17.4 16 18C16 18.6 16.4 19 17 19C17.6 19 18 18.6 18 18C18 17.4 17.6 17 17 17ZM9 18C9 18.6 8.6 19 8 19C7.4 19 7 18.6 7 18C7 17.4 7.4 17 8 17C8.6 17 9 17.4 9 18Z"
            stroke="currentColor"
            stroke-width="2"
            stroke-linecap="round"
            stroke-linejoin="round"
          />
        </svg>
        <!-- عرض العداد دائماً -->
        @if(cartCount > 0) {
        <span class="cart-count">{{ cartCount }}</span>
        }
      </a>

      <!-- User Section -->
      <div class="user-section">
        @if(name != ''){
        <div class="user-profile">
          <div class="user-avatar">
            <svg
              width="32"
              height="32"
              viewBox="0 0 24 24"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
            >
              <path
                d="M12 12C14.21 12 16 10.21 16 8C16 5.79 14.21 4 12 4C9.79 4 8 5.79 8 8C8 10.21 9.79 12 12 12ZM12 14C9.33 14 4 15.34 4 18V20H20V18C20 15.34 14.67 14 12 14Z"
                fill="currentColor"
              />
            </svg>
          </div>
          <div class="user-info">
            <span class="user-name">Hi, {{ name }}</span>
            <div class="user-actions">
               @if(name != '' && userRole === 'user') {
              <a routerLink="/account" class="account-link">My Account</a>}
              <button class="logout-btn" (click)="logOut()">
                <svg
                  width="16"
                  height="16"
                  viewBox="0 0 24 24"
                  fill="none"
                  xmlns="http://www.w3.org/2000/svg"
                >
                  <path
                    d="M17 7L15.59 5.59L14 7.17V3H12V7.17L10.41 5.59L9 7L12 10L17 7ZM19 21H5C3.89 21 3 20.1 3 19V5C3 3.9 3.89 3 5 3H9V5H5V19H19V5H15V3H19C20.1 3 21 3.9 21 5V19C21 20.1 20.1 21 19 21Z"
                    fill="currentColor"
                  />
                </svg>
                Logout
              </button>
            </div>
          </div>
        </div>
        } @else {
        <a routerLink="/login" class="login-btn">
          <svg
            width="20"
            height="20"
            viewBox="0 0 24 24"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path
              d="M11 7L9.6 8.4L12.2 11H2V13H12.2L9.6 15.6L11 17L16 12L11 7ZM20 19H12V21H20C21.1 21 22 20.1 22 19V5C22 3.9 21.1 3 20 3H12V5H20V19Z"
              fill="currentColor"
            />
          </svg>
          <span>Login</span>
        </a>
        }
      </div>
    </div>

    <!-- Search Overlay -->
    @if(showSearch) {
    <div class="search-overlay">
      <div class="search-container">
        <input
          type="text"
          placeholder="Search products, brands, categories..."
          class="search-input"
          [(ngModel)]="searchQuery"
          (keyup.enter)="performSearch()"
          #searchInput
          autofocus
        />
        <button class="search-btn-main" (click)="performSearch()">
          <svg
            width="24"
            height="24"
            viewBox="0 0 24 24"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path
              d="M15.5 14H14.71L14.43 13.73C15.41 12.59 16 11.11 16 9.5C16 5.91 13.09 3 9.5 3C5.91 3 3 5.91 3 9.5C3 13.09 5.91 16 9.5 16C11.11 16 12.59 15.41 13.73 14.43L14 14.71V15.5L19 20.49L20.49 19L15.5 14ZM9.5 14C7.01 14 5 11.99 5 9.5C5 7.01 7.01 5 9.5 5C11.99 5 14 7.01 14 9.5C14 11.99 11.99 14 9.5 14Z"
              fill="white"
            />
          </svg>
        </button>
        <button class="search-close" (click)="closeSearch()">
          <svg
            width="24"
            height="24"
            viewBox="0 0 24 24"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path
              d="M19 6.41L17.59 5L12 10.59L6.41 5L5 6.41L10.59 12L5 17.59L6.41 19L12 13.41L17.59 19L19 17.59L13.41 12L19 6.41Z"
              fill="currentColor"
            />
          </svg>
        </button>
      </div>
    </div>
    }
  </div>
</header>

<router-outlet></router-outlet>
<footer class="footer">
  <div class="footer-container">
    <!-- Newsletter Section -->
    <div class="newsletter-section">
      <div class="newsletter-content">
        <h3 class="newsletter-title">Join Our Newsletter</h3>
        <p class="newsletter-subtitle">
          Subscribe to get special offers, free giveaways, and exclusive deals.
        </p>
        <div class="newsletter-form">
          <input type="email" placeholder="Enter your email" class="newsletter-input" />
          <button class="newsletter-btn">
            Subscribe
            <svg
              width="20"
              height="20"
              viewBox="0 0 24 24"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
            >
              <path
                d="M5 13L4 12L3 13L5 13ZM20 12C20.5523 12 21 11.5523 21 11C21 10.4477 20.5523 10 20 10V12ZM8.29289 5.29289C7.90237 5.68342 7.90237 6.31658 8.29289 6.70711L14.6569 13.0711C15.0474 13.4616 15.6805 13.4616 16.0711 13.0711C16.4616 12.6805 16.4616 12.0474 16.0711 11.6569L9.70711 5.29289C9.31658 4.90237 8.68342 4.90237 8.29289 5.29289ZM3 13H5V11H3V13ZM5 13H20V10H5V13Z"
                fill="white"
              />
            </svg>
          </button>
        </div>
      </div>
    </div>

    <!-- Main Footer Content -->
    <div class="footer-content">
      <div class="footer-brand">
        <div class="footer-logo">
          <svg
            width="40"
            height="40"
            viewBox="0 0 32 32"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path
              d="M16 2L4 8V24L16 30L28 24V8L16 2ZM16 4.472L25.764 9.236L16 14L6.236 9.236L16 4.472ZM6 10.764L16 16L26 10.764V22.236L16 28L6 22.236V10.764Z"
              fill="currentColor"
            />
            <path d="M12 18H20V20H12V18Z" fill="currentColor" />
            <path d="M12 22H20V24H12V22Z" fill="currentColor" />
          </svg>
          <div class="brand-info">
            <h2 class="footer-brand-title">Prand.Fashion</h2>
            <p class="brand-tagline">Style that speaks volumes</p>
          </div>
        </div>
        <p class="brand-description">
          We're passionate about bringing you the latest fashion trends with quality and style at
          the forefront.
        </p>
        <div class="social-links">
          <a href="#" class="social-link" aria-label="Facebook">
            <svg
              width="20"
              height="20"
              viewBox="0 0 24 24"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
            >
              <path
                d="M18 2H15C13.6739 2 12.4021 2.52678 11.4645 3.46447C10.5268 4.40215 10 5.67392 10 7V10H7V14H10V22H14V14H17L18 10H14V7C14 6.73478 14.1054 6.48043 14.2929 6.29289C14.4804 6.10536 14.7348 6 15 6H18V2Z"
                fill="currentColor"
              />
            </svg>
          </a>
          <a href="#" class="social-link" aria-label="Instagram">
            <svg
              width="20"
              height="20"
              viewBox="0 0 24 24"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
            >
              <path
                d="M12 2.162C15.204 2.162 15.584 2.174 16.85 2.228C18.116 2.282 18.836 2.48 19.454 2.692C20.12 2.92 20.636 3.188 21.158 3.71C21.68 4.232 21.948 4.748 22.176 5.414C22.388 6.032 22.586 6.752 22.64 8.018C22.694 9.284 22.706 9.664 22.706 12.868C22.706 16.072 22.694 16.452 22.64 17.718C22.586 18.984 22.388 19.704 22.176 20.322C21.948 20.988 21.68 21.504 21.158 22.026C20.636 22.548 20.12 22.816 19.454 23.044C18.836 23.256 18.116 23.454 16.85 23.508C15.584 23.562 15.204 23.574 12 23.574C8.796 23.574 8.416 23.562 7.15 23.508C5.884 23.454 5.164 23.256 4.546 23.044C3.88 22.816 3.364 22.548 2.842 22.026C2.32 21.504 2.052 20.988 1.824 20.322C1.612 19.704 1.414 18.984 1.36 17.718C1.306 16.452 1.294 16.072 1.294 12.868C1.294 9.664 1.306 9.284 1.36 8.018C1.414 6.752 1.612 6.032 1.824 5.414C2.052 4.748 2.32 4.232 2.842 3.71C3.364 3.188 3.88 2.92 4.546 2.692C5.164 2.48 5.884 2.282 7.15 2.228C8.416 2.174 8.796 2.162 12 2.162ZM12 0C8.688 0 8.256 0.014 6.966 0.068C5.678 0.122 4.654 0.33 3.744 0.628C2.8 0.938 1.998 1.33 1.196 2.132C0.394 2.934 0.002 3.736 -0.308 4.68C-0.606 5.59 -0.814 6.614 -0.868 7.902C-0.922 9.192 -0.936 9.624 -0.936 12.936C-0.936 16.248 -0.922 16.68 -0.868 17.97C-0.814 19.258 -0.606 20.282 -0.308 21.192C0.002 22.136 0.394 22.938 1.196 23.74C1.998 24.542 2.8 24.934 3.744 25.244C4.654 25.542 5.678 25.75 6.966 25.804C8.256 25.858 8.688 25.872 12 25.872C15.312 25.872 15.744 25.858 17.034 25.804C18.322 25.75 19.346 25.542 20.256 25.244C21.2 24.934 22.002 24.542 22.804 23.74C23.606 22.938 23.998 22.136 24.308 21.192C24.606 20.282 24.814 19.258 24.868 17.97C24.922 16.68 24.936 16.248 24.936 12.936C24.936 9.624 24.922 9.192 24.868 7.902C24.814 6.614 24.606 5.59 24.308 4.68C23.998 3.736 23.606 2.934 22.804 2.132C22.002 1.33 21.2 0.938 20.256 0.628C19.346 0.33 18.322 0.122 17.034 0.068C15.744 0.014 15.312 0 12 0Z"
                fill="currentColor"
              />
              <path
                d="M12 5.838C8.596 5.838 5.838 8.596 5.838 12C5.838 15.404 8.596 18.162 12 18.162C15.404 18.162 18.162 15.404 18.162 12C18.162 8.596 15.404 5.838 12 5.838ZM12 16C9.794 16 8 14.206 8 12C8 9.794 9.794 8 12 8C14.206 8 16 9.794 16 12C16 14.206 14.206 16 12 16Z"
                fill="currentColor"
              />
              <circle cx="18.406" cy="5.594" r="1.44" fill="currentColor" />
            </svg>
          </a>
          <a href="#" class="social-link" aria-label="Twitter">
            <svg
              width="20"
              height="20"
              viewBox="0 0 24 24"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
            >
              <path
                d="M22.46 6C21.69 6.35 20.86 6.58 20 6.69C20.88 6.16 21.56 5.32 21.88 4.31C21.05 4.81 20.13 5.16 19.16 5.36C18.37 4.5 17.26 4 16 4C13.65 4 11.73 5.92 11.73 8.29C11.73 8.63 11.77 8.96 11.84 9.27C8.28 9.09 5.11 7.38 3 4.79C2.63 5.42 2.42 6.16 2.42 6.94C2.42 8.43 3.17 9.75 4.33 10.5C3.62 10.5 2.96 10.3 2.38 10C2.38 10 2.38 10 2.38 10.03C2.38 12.11 3.86 13.85 5.82 14.24C5.46 14.34 5.08 14.39 4.69 14.39C4.42 14.39 4.15 14.36 3.89 14.31C4.43 16 6 17.26 7.89 17.29C6.43 18.45 4.58 19.13 2.56 19.13C2.22 19.13 1.88 19.11 1.54 19.07C3.44 20.29 5.7 21 8.12 21C16 21 20.33 14.46 20.33 8.79C20.33 8.6 20.33 8.42 20.32 8.23C21.16 7.63 21.88 6.87 22.46 6Z"
                fill="currentColor"
              />
            </svg>
          </a>
        </div>
      </div>

      <div class="footer-links-grid">
        <!-- SHOP -->
        <div class="footer-links-group">
          <h4 class="links-title">Shop</h4>
          <ul class="footer-links">
            <li><a routerLink="/products" class="footer-link">All Products</a></li>
            <li>
              <a routerLink="/products" [queryParams]="{ category: 'men' }" class="footer-link"
                >Men's Fashion</a
              >
            </li>
            <li>
              <a routerLink="/products" [queryParams]="{ category: 'women' }" class="footer-link"
                >Women's Fashion</a
              >
            </li>
            <li>
              <a
                routerLink="/products"
                [queryParams]="{ category: 'accessories' }"
                class="footer-link"
                >Accessories</a
              >
            </li>
            <li>
              <a routerLink="/products" [queryParams]="{ sort: 'newest' }" class="footer-link"
                >New Arrivals</a
              >
            </li>
          </ul>
        </div>

        <!-- HELP -->
        <div class="footer-links-group">
          <h4 class="links-title">Help</h4>
          <ul class="footer-links">
            <li><a routerLink="/help/faq" class="footer-link">FAQ</a></li>
            <li><a routerLink="/help/shipping" class="footer-link">Shipping & Delivery</a></li>
            <li><a routerLink="/help/returns" class="footer-link">Returns & Exchanges</a></li>
            <li><a routerLink="/help/size-guide" class="footer-link">Size Guide</a></li>
            <li><a routerLink="/help/contact" class="footer-link">Contact Us</a></li>
          </ul>
        </div>

        <!-- COMPANY -->
        <div class="footer-links-group">
          <h4 class="links-title">Company</h4>
          <ul class="footer-links">
            <li><a routerLink="/about" class="footer-link">About Us</a></li>
            <li><a routerLink="/careers" class="footer-link">Careers</a></li>
            <li><a routerLink="/blog" class="footer-link">Blog</a></li>
            <li><a routerLink="/privacy" class="footer-link">Privacy Policy</a></li>
            <li><a routerLink="/terms" class="footer-link">Terms of Service</a></li>
          </ul>
        </div>
      </div>
    </div>

    <!-- Copyright -->
    <div class="copyright-section">
      <div class="copyright-content">
        <p class="copyright-text">© 2025 Prand.Fashion. All rights reserved.</p>
        <div class="payment-methods">
          <svg
            width="40"
            height="24"
            viewBox="0 0 40 24"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
          >
            <rect width="40" height="24" rx="4" fill="#1A1F71" />
            <path d="M15 12H25" stroke="white" stroke-width="2" stroke-linecap="round" />
            <circle cx="20" cy="12" r="3" fill="white" />
          </svg>
          <svg
            width="40"
            height="24"
            viewBox="0 0 40 24"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
          >
            <rect width="40" height="24" rx="4" fill="#FF5F00" />
            <path d="M20 8L24 16H16L20 8Z" fill="white" />
          </svg>
          <svg
            width="40"
            height="24"
            viewBox="0 0 40 24"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
          >
            <rect width="40" height="24" rx="4" fill="#ED0006" />
            <circle cx="15" cy="12" r="6" fill="white" />
            <circle cx="25" cy="12" r="6" fill="#F79E1B" />
          </svg>
        </div>
      </div>
    </div>
  </div>
</footer>
